---
layout: post
title: "《深入理解计算机系统》读书笔记"
date: 2017/4/9 11:37:13 
description: "《深入理解计算机系统》读书笔记"
categories: [读书笔记]
tags: [计算机系统]
---

* [第3章 程序的机器级表示](#3)



### 2.1.2 字

每台计算机都有一个字长，指明整数和指针数据的标称大小。

字长决定了虚拟地址空间的最大大小。

### 2.1.3 数据大小



### 2.1.4 寻址和字节顺序 

对于跨越多个字节的程序对象，必须建立两个规则：

* 这个对象的地址是什么
* 在存储器中如何排列这些字节

在几乎所有的机器上，多字节对象都被存储为连续的字节序列，对象的地址为所使用字节中最小的地址。

例如，一个 int 型的变量 x 的地址为 0x100，即地址表达式 &x 的值是 0x100。那么，x 的 4 个字节将被存储在存储器的 0x100、0x101、0x102、0x103位置。

排列表示一个对象的字节有两个通用的规则：

1. 小端法：在存储器中按照从最低有效字节到最高有效字节的顺序存储对象
2. 大端法：按照从最高有效字节到最低有效字节的顺序存储对象

例如，变量 x 的类型为 int，位于地址 0x100 处，十六进制值为 0x01234567，地址范围为 0x100 - 0x103 字节，其排列顺序依赖于机器的类型：

小端法：

| ... | 0x100 | 0x101 | 0x102 | 0x103 | ... |
|:---:|:-----:|:-----:|:-----:|:-----:|:---:|
| ... |  67   |  45   |  23   |  01   | ... |

大端法：

| ... | 0x100 | 0x101 | 0x102 | 0x103 | ... |
|:---:|:-----:|:-----:|:-----:|:-----:|:---:|
| ... |  01   |  23   |  45   |  67   | ... |


### 2.1.5 表示字符串

C 语言中，字符串被编码为一个以 null （值为 0）字符结尾的字符数组。每个字符都由某个标准编码来表示，如 ASCII 码。


### 2.1.6 表示代码

二进制代码是不兼容的，二进制代码很少能在不同机器和操作系统组合之间移植。


### 2.1.7 布尔代数简介




# <span id="3">第3章 程序的机器级表示</span>

编译器基于编程语言的规则、目标机器的指令集和操作系统遵循的规则，经过一系列的阶段产生机器代码。

例如，GCC C 语言编译器以**汇编代码**的形式产生输出，汇编代码是机器代码的文本表示，给出程序中的每一条指令。然后 GCC 调用**汇编器**和**链接器**，根据汇编代码生成可执行的机器代码。

计算机执行机器代码，用**字节序列**编码低级的操作，包括处理数据、管理存储器、读写存储设备上的数据，以及利用网络通信。

用高级语言编程最大的优点是，用高级语言编写的程序可以在很多不同的机器上编译和运行， 而汇编代码则与特定机器密切相关。

精通细节是理解更深和更基本概念的先决条件。


## 3.1 历史观点

## 3.2 程序编码

### 3.2.1 机器级代码

两种抽象：

* 第一种是，机器级程序的格式和行为，定义为指令集体系结构，它定义了处理器的状态、指令的格式，以及每条指令对状态的影响。
* 第二种是，机器级程序使用的存储器地址是虚拟地址，提供的处理器模型看上去是一个非常大的数组。

汇编代码非常接近于机器代码，与机器代码的二进制格式相比，汇编代码有一个主要特点，即它用可读性更好的文本格式来表示。

### 3.2.2 代码示例

机器实际执行的程序，只是对一系列指令进行编码的字节序列。机器对产生这些指令的源代码几乎一无所知。


### 3.2.3 关于格式的注解


## 数据格式


## 访问信息

### 操作数指示符

大多数指令有一个或多个操作数。

各种不同的操作数的可能性被分为三种类型：

* 立即数：也就是常数值
* 寄存器：表示某个寄存器的内容
* 存储器：根据计算出来的地址，访问某个存储器的位置

### 数据传送指令

MOV 类中的指令将源操作数的值复制到目的操作数中。

源操作数指定的值是一个立即数，存储在寄存器中或者存储器中。目的操作数指定一个位置，要么是一个寄存器，要么是一个存储器地址。

### 数据传送示例

## 算术和逻辑操作

加载有效地址、一元操作、二元操作、移位

### 加载有效地址

加载有效地址（load effective address）指令 leal 实际是 movl 指令的变形。 

